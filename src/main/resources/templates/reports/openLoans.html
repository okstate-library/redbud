<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" lang="en">
<head th:replace="common/header :: common-header" />
<body roleId="page-top" data-spy="scroll"
	data-target=".navbar-fixed-top">
<head th:replace="common/header :: navbar" />
<div class="container">

	<div class="row">
		<div class="col-lg-12">
			<h1 class="page-header">
				Open Loans
				<button type="button" class="btn btn-info" data-bs-toggle="modal"
					id="helpButton" data-bs-target="#exampleModal">?</button>
			</h1>
		</div>

		<div class="modal fade" id="exampleModal" tabindex="-1"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title" id="exampleModalLabel">Open Loans -
							Help</h3>
					</div>
					<div class="modal-body">

						<ul>
							<li>This report displays open loans only. Report columns
								include the location, barcode, call number, material type,
								title, date of the loan action, and the loan action (checked
								out, renewed, override, checked in).</li>
							<li>This report can be used to see what items in a
								particular location or material type are currently checked out.
								It can be filtered by location, date range, material type, and
								loan action.</li>
							<li>This process is run include in the daily process. By
								accessing the API to get the open loans based on the location
								within certain time frame. The time frame is defined as, if the
								data is accessed through the daily process, the start time is
								set to 00:00:00 of the previous day, and the end time is
								23:59:59 of the same day.</li>

						</ul>
						<h5>API’s</h5>

						<ul>
							<li>/loan-storage/loans?query=(status.name==’open’ and
								returnDate>=’ startDateTime’AND returnDate &lt;=’endDateTime + " and
								itemEffectiveLocationIdAtCheckOut==’locationId’)</li>
						</ul>

						<h5>Operations</h5>

						<ul>
							<li>While processing the loan data, the system verifies
								whether the loaned item exists in the database, performs the
								necessary operations, and saves the loan details in the database
								for reporting purposes.</li>
							<li>In the application, the “Operations” menu includes a set
								of processes, among which the “Circulation Loan” section
								contains multiple processes as listed below.</li>
						</ul>

						<ol>
							<li><b>Manual Process for getting the Circulation loan
									records to database.</b> <br />The above operation is performed
								for all locations without considering any specific time frame.</li>

							<li><b>Manual Process for getting the Circulation Loan
									records to database for a specific location.</b> <br />The above
								operation is performed without considering any specific time
								frame or location.</li>

							<li><b>Manual Process for getting the Circulation loan
									records to database based on previous day records.</b> <br />
								Simulating the daily process, the above operation is performed
								for all locations based on the data from the previous day.</li>
						</ol>

						<h5>FOLIO DOC</h5>

						<!-- <ul>
							<li><a
								href="https://s3.amazonaws.com/foliodocs/api/mod-feesfines/p/accounts.html">
									https://s3.amazonaws.com/foliodocs/api/mod-feesfines/p/accounts.html
							</a></li>
							<li><a
								href="https://s3.amazonaws.com/foliodocs/api/mod-users/p/users.html">
									https://s3.amazonaws.com/foliodocs/api/mod-users/p/users.html </a></li>
							<li><a
								href="https://s3.amazonaws.com/foliodocs/api/mod-patron-blocks/p/automated-patron-blocks.html">
									https://s3.amazonaws.com/foliodocs/api/mod-patron-blocks/p/automated-patron-blocks.html</a></li>
						</ul> -->
					</div>

				</div>
			</div>
		</div>
	</div>

	<div class="container-border">
		<div class="row">
			<div class="col-xs-3 form-inline">

				<div class="form-group">
					<div class="form-group">
						<label for="firstName" class="cols-sm-2 control-label">
							Institution </label>
						<div class="cols-sm-10">
							<div class="input-group">

								<select onchange="selectInstitution(this)" class="form-control"
									id="institutionDropDown3" name="institutionDropDown">
									<option th:value="0">Select Institution</option>

									<option th:each="institution : ${institutionList}"
										th:value="${institution.institution_id}"
										th:text="${institution.institution_name}"></option>
								</select>


							</div>
						</div>
					</div>

				</div>


			</div>

			<div class="col-xs-3 form-inline">

				<div class="form-group">
					<div class="form-group">
						<label for="firstName" class="cols-sm-2 control-label">
							Campus </label>
						<div class="cols-sm-10">
							<div class="input-group">

								<select onchange="selectCampus(this)" class="form-control"
									id="campusDropDown3" name="campusDropDown">
									<option th:value="0">Select Campus</option>

									<option th:each="campus : ${campusList}"
										th:value="${campus.campus_id}" th:text="${campus.campus_name}"></option>
								</select>


							</div>
						</div>
					</div>

				</div>


			</div>
			<div class="col-xs-3 form-inline">

				<div class="form-group">
					<div class="form-group">
						<label for="firstName" class="cols-sm-2 control-label">
							Library </label>
						<div class="cols-sm-10">
							<div class="input-group">

								<select onchange="selectLibrary(this)" class="form-control"
									id="libraryDropDown3" name="libraryDropDown">
									<option th:value="0">Select Library</option>

									<option th:each="library : ${libraryList}"
										th:value="${library.library_id}"
										th:text="${library.library_name}"></option>
								</select>


							</div>
						</div>
					</div>

				</div>


			</div>

			<div class="col-xs-3 form-inline">

				<div class="form-group">
					<div class="form-group">
						<label for="firstName" class="cols-sm-2 control-label">
							Location (*)</label>
						<div class="cols-sm-10">
							<div class="input-group">

								<select class="form-control" id="locationDropDown3"
									name="locationDropDown">
									<option th:value="0">Select Location</option>

									<option th:each="location : ${locationList}"
										th:value="${location.location_id}"
										th:text="${location.location_name}"></option>
								</select>


							</div>
						</div>
					</div>

				</div>


			</div>
		</div>

		<div class="row top-buffer"></div>
		<div class="row container-border">

			<div class="col-xs-3 form-inline">

				<div class="form-group">
					<div class="form-group">
						<label class="cols-sm-2 control-label"> From Date (*)</label>
						<div class="cols-sm-10">
							<div class="input-group">

								<div class="input-group date" id='datetimepicker_from_date'>
									<input type='text' class="form-control"
										th:value="${start_date}" name="start_date" id="start_date"
										required="required" /> <span class="input-group-addon"><i
										class="fa fa-calendar" aria-hidden="true"></i></span>

								</div>


							</div>
						</div>
					</div>

				</div>
			</div>
			<div class="col-xs-3 form-inline">
				<div class="form-group">
					<div class="form-group">
						<label class="cols-sm-2 control-label">To Date (*)</label>
						<div class="cols-sm-10">
							<div class="input-group">

								<div class="input-group date" id='datetimepicker_to_date'>
									<input type='text' class="form-control" th:value="${end_date}"
										name="end_date" id="end_date" required="required" /> <span
										class="input-group-addon"><i class="fa fa-calendar"
										aria-hidden="true"></i></span>

								</div>


							</div>
						</div>
					</div>

				</div>
			</div>

		</div>
		<div class="row top-buffer"></div>

		<div class="row">

			<div class="col-xs-3 form-inline">
				<label class="cols-sm-2 control-label">Material Type</label>
				<div class="cols-sm-10">
					<div class="input-group">

						<select class="form-control" id="materialTypeDropDown"
							th:name="materialTypeDropDown">
							<option th:value="0">All Material Types</option>

							<option th:each="material: ${materialTypeList}"
								th:value="${material.materialType}"
								th:text="${material.materialType}"></option>
						</select>



					</div>
				</div>
			</div>
			<div class="col-xs-3 form-inline">

				<div class="form-group">
					<div class="form-group">
						<label class="cols-sm-2 control-label">Loan Action</label>
						<div class="cols-sm-10">
							<div class="input-group">

								<select class="form-control" id="loanActionDropDown"
									th:name="loanActionDropDown">
									<option value="0">All</option>
									<option value="1">checkedout</option>
									<option value="2">renewed</option>
									<option value="3">checkedOutThroughOverride</option>
									<option value="4">checkedin</option>
								</select>

							</div>
						</div>
					</div>

				</div>



			</div>
			<div class="col-xs-3 form-inline">

				<div class="form-group">
					<div class="form-group"></div>

				</div>

			</div>
			<div class="col-xs-3 form-inline">
				<div class="form-group">
					<div class="form-group">
						<label class="cols-sm-2 control-label"> </label>
						<div class="cols-sm-10">
							<div class="input-group">
								<button type="button" id="load-dt" class="btn btn-primary">Submit</button>


							</div>
						</div>
					</div>

				</div>

			</div>


		</div>
	</div>

	<div class="row top-buffer"></div>

	<div class="row">
		<div class="table-responsive">
			<table id="circulationLogTable"
				class="table table-bordered table-hover table-striped">
				<thead>
					<tr class="datatable-heading">
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th style="display: none;"></th>
						<th style="display: none;"></th>
						<th style="display: none;"></th>
						<th style="display: none;"></th>
						<th style="display: none;"></th>
					</tr>
				</thead>
			</table>
		</div>
	</div>
	<div class="row top-buffer"></div>

</div>
<div th:replace="common/footer :: footer"></div>
<div th:replace="common/header :: body-bottom-scripts"></div>
<script>
	$("#load-dt").click(
			function() {

				if (institutionDropDown3.value == 0
						&& campusDropDown3.value == 0
						&& libraryDropDown3.value == 0
						&& locationDropDown3.value == 0) {
					alert("Please select a value from at least one dropdown.");
				} else if ($('#start_date').val() == ''
						|| $('#end_date').val() == '') {
					alert("Select From and To Date")
				} else {
					callCirculationLoanReportAjaxRequest();
				}

			});
</script>
</body>
</html>